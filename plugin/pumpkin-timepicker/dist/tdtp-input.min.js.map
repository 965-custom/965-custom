{"version":3,"sources":["webpack://tdtp-input/webpack/universalModuleDefinition","webpack://tdtp-input/webpack/bootstrap","webpack://tdtp-input/./node_modules/_@babel_runtime@7.11.2@@babel/runtime/helpers/defineProperty.js","webpack://tdtp-input/./src/components.js","webpack://tdtp-input/./src/blocks.js","webpack://tdtp-input/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","configurable","writable","editor","opt","domc","DomComponents","defaultType","getType","textType","defaultModel","model","defaultView","view","INPUT_TYPE","ComponentsView","traits","label","type","valueTrue","valueFalse","changeProps","addType","extend","defaults","labelCustomSelectName","tagName","droppable","script","link","document","createElement","rel","href","body","appendChild","JSON","parse","componentAttr","forEach","item","initTraits","time","Date","getTime","innerHTML","Choices","init","this","on","handleChange","trigger","isComponent","el","toUpperCase","bm","BlockManager","labelPfx","style","add","labelCustomInputName","category","content","opts","config","loadInputComponent","loadInputBlock"],"mappings":"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","file":"dist/tdtp-input.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tdtp-input\"] = factory();\n\telse\n\t\troot[\"tdtp-input\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","export default function(editor, opt = {}) {\r\n  const c = opt\r\n  const domc = editor.DomComponents\r\n  const defaultType = domc.getType('default')\r\n  const textType = domc.getType('text')\r\n  const defaultModel = defaultType.model\r\n  const defaultView = defaultType.view\r\n  const textModel = textType.model\r\n  const textView = textType.view\r\n  const ComponentsView = domc.ComponentsView\r\n\r\n  const INPUT_TYPE = 'custominput'\r\n  const traits = [\r\n    {\r\n      label: 'placeholder',\r\n      name: 'placeholder',\r\n      value: ''\r\n    },\r\n    {\r\n      type: 'checkbox',\r\n      label: 'removeItem',\r\n      name: 'removeItemButton',\r\n      valueTrue: true,\r\n      valueFalse: false,\r\n      changeProps: 1,\r\n      value: false\r\n    },\r\n    {\r\n      label: 'maxCount',\r\n      name: 'maxItemCount',\r\n      value: -1\r\n    }\r\n  ]\r\n  domc.addType(INPUT_TYPE, {\r\n    model: defaultModel.extend({\r\n      defaults: {\r\n        ...defaultModel.prototype.defaults,\r\n        name: c.labelCustomSelectName,\r\n        tagName: INPUT_TYPE,\r\n        droppable: true,\r\n        traits,\r\n        script: function() {\r\n          let el = this\r\n          let link = document.createElement('link')\r\n          link.rel = 'stylesheet'\r\n          link.href = 'https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css'\r\n          document.body.appendChild(link)\r\n\r\n          let traits = JSON.parse('{[ traits ]}')\r\n          let componentAttr = {}\r\n          let initTraits = (traits) => {\r\n            traits.forEach(item => {\r\n              if (item.name === 'placeholder') {\r\n                componentAttr[item.name] = true\r\n                componentAttr['placeholderValue'] = item.value\r\n              } else {\r\n                componentAttr[item.name] = item.value\r\n              }\r\n            })\r\n          }\r\n          initTraits(traits)\r\n          let initComponent = () => {\r\n            let time = new Date().getTime()\r\n            this.innerHTML = `\r\n              <input\r\n                class=\"form-control\"\r\n                id=\"custom-input-${time}\"\r\n                type=\"text\"\r\n                value=\"\"\r\n              />\r\n            `\r\n            let defaultInput = new Choices(`#custom-input-${time}`, componentAttr)\r\n            return defaultInput\r\n          }\r\n          const component = initComponent()\r\n        }\r\n      },\r\n      init() {\r\n        this.on('change:attributes', this.handleChange);\r\n      },\r\n      handleChange() {\r\n        this.trigger('change:script')\r\n      }\r\n    }, {\r\n      isComponent(el) {\r\n        if (el.tagName === INPUT_TYPE.toUpperCase()) {\r\n          return { type: INPUT_TYPE }\r\n        }\r\n      }\r\n    }),\r\n    view: defaultView\r\n  })\r\n}","export default (editor, opt = {}) => {\r\n  const c = opt;\r\n  const bm = editor.BlockManager;\r\n  const labelPfx = c.labelPfx || 'label'\r\n  const style = `<style>\r\n    .${labelPfx}-box {\r\n      width: 180px;\r\n      text-align: right;\r\n      vertical-align: middle;\r\n      float: left;\r\n      font-size: 14px;\r\n      color: #606266;\r\n      line-height: 32px;\r\n      box-sizing: border-box;\r\n    }\r\n  </style>`\r\n  bm.add('custom-input', {\r\n    label: `\r\n    <svg t=\"1600940080478\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"1596\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"54\" height=\"54\"><defs><style type=\"text/css\"></style></defs><path d=\"M635.328 736a32 32 0 0 0-32-32H96V352h507.2a32 32 0 1 0 0-64H64a32 32 0 0 0-32 32v416a32 32 0 0 0 32 32h539.328a32 32 0 0 0 32-32zM960 288h-92.928a32 32 0 1 0 0 64H928v352h-60.288a32 32 0 1 0 0 64H960a32 32 0 0 0 32-32V320a32 32 0 0 0-32-32zM832.672 848H768V208h64.288a32 32 0 1 0 0-64H639.36a32 32 0 1 0 0 64H704v640h-64.64a32 32 0 1 0 0 64h193.28a32 32 0 1 0 0.032-64z\" p-id=\"1597\"></path></svg>\r\n    <div class=\"gjs-block-label\">${c.labelCustomInputName}</div>`,\r\n    category: c.category,\r\n    content: `\r\n    <div\r\n      class=\"${labelPfx}-box\"\r\n      data-js=\"custom-input\"\r\n      data-gjs-type=\"custominput\">\r\n    </div>\r\n    ${style}\r\n    `\r\n  });\r\n}","import loadInputTrait from './traits'\r\nimport loadInputComponent from './components'\r\nimport loadInputBlock from './blocks'\r\n\r\nexport default (editor, opts = {}) => {\r\n\r\n  const config = {\r\n    labelCustomInputName: 'CustomInput',\r\n    category: 'Forms',\r\n    ...opts\r\n  };\r\n  loadInputTrait(editor, config)\r\n  loadInputComponent(editor, config)\r\n  loadInputBlock(editor, config)\r\n}\r\n"],"sourceRoot":""}